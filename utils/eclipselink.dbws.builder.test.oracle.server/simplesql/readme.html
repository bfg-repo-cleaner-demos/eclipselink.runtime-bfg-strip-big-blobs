<html>
<body>
<pre>
How to run the dbws.simpletable example
=======================================
Note: these instructions say 'run the script XXX.cmd' or set a variable in
'YYY.bat' - there are Unix shell script equivalents for everything.

Prerequisites
=============
- Ant: 1.7.1 (or higher)
   You may need to increase the amount of memory allocated to Ant. On Windows,
   this is set in the file %HOME%\antrc_pre.bat:
       set ANT_OPTS=%ANT_OPTS% -Xmx512M

   On Unix, this is set in the file ${HOME}/ant.conf:
      ANT_OPTS="$ANT_OPTS -Xmx512M"

- full Java2 SDK: JavaSE 6 (1.6.0_11 or later)

- TopLink 11gR1 installer
(TOPLINK_11.1.1.1.0_GENERIC_090328.1800_toplink_111110_en.zip or higher)

- JDBC: Oracle thin driver (11.1.0.6.0 or higher)
  NB - <b>this example is only supported on Oracle</b>

- WLS: 11gR1 (LOAD16c or higher)

Setup
=====
Get the EclipseLink installer .zip file from the build mentioned in the
Prerequisites-section above and extract it to some $TOPLINK_HOME directory:
(NB - not all details of the directory structure shown):

$TOPLINK_HOME
|   toplink-readme.html
|   ...
+---jlib
|   |   <b>eclipselink.jar</b>
|
+---modules
|       ...
|       <b>oracle.http_client_11.1.1.jar</b>
|       <b>orawsdl.jar</b>
|
+---utils
|   +---dbws
|   |       dbwsbuilder.cmd
|   |       dbwsbuilder.sh
|   |       <b>eclipselink-dbwsutils.jar</b>

Get the WebLogic installer from the build mentioned in the
Prerequisites-section above and install it to some $WLS_HOME directory:
(NB - not all details of the directory structure shown):

$WLS_HOME
|   ...
|   registry.xml
|
+---logs
|       log.txt
|
+---modules
|   |   com.bea.adaptive.harvester.utils_1.2.0.0.jar
|   |   ...
|   |   <b><i>org.eclipse.persistence_1.0.0.0_1-1-0.jar</i></b>  ** replace with
|   |                                                 <b>eclipselink.jar</b>
|                                                     from prerequisites
\---wlserver_10.3                                     above ***
...

Example Directory Structure
===========================
The dbws.simpletable.zip file contains all the required files to setup and run
the example. Extract the .zip file to some directory $EXAMPLE_ROOT:

$EXAMPLE_ROOT
|   build.cmd
|   build.sh
|   build.xml
|   env.bat
|   env.sh
|   readme.html                                    ** this file **
|   resetDatabase.cmd
|   runClient.cmd
|   runClient.sh
|   runtime.properties
|
+---config
|       dbws-builder.xml
|       fixed.properties
|       fixed.xml
|       setup.sql
|
+---src
|   \---test
|           Client.java


Runtime Properties
==================
The runtime properties are isolated to a small number of settings in the
env.{bat|sh} and runtime.properties files.

env.{bat|sh}:
    ANT_HOME
    JAVA_HOME
    TOPLINK_HOME

runtime.properties:

<i>database properties</i>
    db.user=
        database user id - NB: on Oracle, the user should be all UPPERCASE
    db.pwd=
        database password
    db.url=
        database url
    jdbc.jlib.dir=
        location of directory holding the Oracle thin driver jar
    jdbc.jlib=ojdbc6.jar
        name of Oracle thin driver jar

<i>WebLogic properties</i>
    server.host=localhost
        hostname (or IP address) of WebLogic instance that will host the Web
        service
    server.port=7001
        port number associated with the WebLogic instance that will host the Web
        service
    server.datasource=jdbc/DBWStestDS
        name of JNDI location for JDBC datasource used by the Web service

<i>TopLink properties</i>
    logging.level=fine
        TopLink logging level - supported values:
        all, finest, finer, fine, config, info, warning, severe, off

Building and Running the dbws.simpletable example
=================================================
Steps
    0(a): Run resetDatabase.cmd script
          This script only needs to be run once to setup the database tables.

    0(b): Start the WLS instance on the given ${server.host} and ${server.port}
          Once the server is in RUNNING state, go to the admin console
          http://${server.host}:${server.port}/console and add the JDBC datasource,
          using the database properties from above

    1:    run the build.cmd script
          If all the runtime and database properties are setup correctly,
          a simpletable.war file will be generated in the stage directory:
          $EXAMPLE_ROOT
          |   build.cmd
          |   ...
          \---dbws.simpletable
              |
               \---stage
                       dbws-builder.xml
                       simpletable.war

    2:    Using the admin console, deploy the simpletable Web service.
          If the datasource is setup correctly (and the
     ${logging.level} set to 'info' or higher), the following should be logged:

...
[EL Info]: 2009-03-30 11:52:33.062--ServerSession(26392967)--Thread(Thread[[ACTI
VE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)',5,Pool
ed Threads])--<b>simpletable-dbws-or-session login</b> successful


Testing the Web service
=======================
Steps

    3:    Run the runClient.cmd script. This runs the JAX-WS client from
	      src/test/Client and only if there are any failures will there be any
		  output


If you have any questions, don't hesitate to contact me:
---
Mike Norman
Senior Software Designer
EclipseLink Product
Oracle Canada Inc., 45 O'Connor, Suite 400
Ottawa, Ontario K1P 1A4 Canada
(613) 288-4638
michael.norman@oracle.com
</body>
</html>