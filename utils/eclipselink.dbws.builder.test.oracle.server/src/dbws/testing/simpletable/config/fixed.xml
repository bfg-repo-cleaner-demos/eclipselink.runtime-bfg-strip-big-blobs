<?xml version="1.0"?>
<!--
  My Ant naming conventions:
    - regardless of the actual OS platform,'/' is the directory separator
    (Ant will convert as appropriate).
  - properties have periods '.', task-names have hyphens '-'.
  - OS environment variables are in ALLCAPS and have 'env' as a prefix
    e.g. ${env.XXX}.
  - Ant properties are lower case.
  - xxx.home = root of a product or component's installation.
  - xxx.dir = root of a directory structure.
  - xxx.jlib.dir = a directory that contains jars,also known
    as "java libraries".
  - xxx.jlib = comma-separated list of jars.
-->
<project
  name="fixed"
  >
  <!-- OS environment variables have 'env' as a prefix -->
  <property environment="env"/>
  
  <!-- properties whose values are specific to the user's runtime environment -->
  <condition property="custom.runtime.properties.message" value="Loading ${user.home}/runtime.properties..."
                                                        else="Custom properties file '${user.home}/runtime.properties' not found to load.">
      <available file="${user.home}/runtime.properties"/>
  </condition>
  <echo message="${custom.runtime.properties.message}"/>
  <property file="${user.home}/runtime.properties"/>
  <property file="${basedir}/runtime.properties"/>

  <!-- properties whose values do not change -->
  <property file="${config.dir}/fixed.properties"/>
  <property
    name="dbws.wsdlLocationURI"
    value="http://${server.host}:${server.port}/${ant.project.name}/${ant.project.name}?wsdl"
  />
  <!-- useful macro definitions -->
  <presetdef
    name="delete-dir-quietly"
    >
    <delete
      dir="_tmp_"
      quiet="true"
      failonerror="false"
    />
  </presetdef>
  <presetdef
    name="delete-file-quietly"
    >
    <delete
      file="_tmp_"
      quiet="true"
      failonerror="false"
    />
  </presetdef>
  <!-- filter tokens to be substituted upon copying -->
  <filterset
    id="tokens"
    >
    <filter
      token="PROJECT"
      value="${ant.project.name}"
    />
    <filter
      token="DB_USER"
      value="${db.user}"
    />
    <filter
      token="DB_PASSWORD"
      value="${db.pwd}"
    />
    <filter
      token="DB_URL"
      value="${db.url}"
    />
    <filter
      token="DB_DRIVER"
      value="${db.driver}"
    />
    <filter
      token="DB_PLATFORM"
      value="${db.platform}"
    />
    <filter
      token="DATASOURCE"
      value="${server.datasource}"
    />
    <filter
      token="WSDL_LOCATION"
      value="${dbws.wsdlLocationURI}"
    />
    <filter
      token="LOG_LEVEL"
      value="${logging.level}"
    />
  </filterset>
  <!-- pre-defined paths -->
  <path
    id="db.path"
    >
    <fileset
      dir="${jdbc.jlib.dir}"
      includes="${jdbc.jlib}"
      >
    </fileset>
  </path>
  <path
    id="project.path"
    >
    <path refid="db.path"/>
    <fileset
      dir="${eclipselink.jlib.dir}"
      includes="${eclipselink.jlib}"
      >
    </fileset>
    <fileset
      dir="${dbws.util.jlib.dir}"
      includes="${dbws.util.jlib}"
      >
    </fileset>
  </path>
</project>