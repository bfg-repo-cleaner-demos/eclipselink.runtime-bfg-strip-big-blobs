CREATE TABLE ATTACHEDBINARY (
  ID NUMBER NOT NULL,
  NAME VARCHAR(80),
  B BLOB,
  PRIMARY KEY (ID)
)|
INSERT INTO ATTACHEDBINARY(ID, NAME, B) VALUES (1, 'one', '010101010101010101010101010101')|
INSERT INTO ATTACHEDBINARY(ID, NAME, B) VALUES (2, 'two', '020202020202020202020202020202')|
INSERT INTO ATTACHEDBINARY(ID, NAME, B) VALUES (3, 'three', '030303030303030303030303030303')|
CREATE OR REPLACE FUNCTION GETBLOBBYID(PK IN NUMBER) RETURN BLOB IS
  blb BLOB := EMPTY_BLOB();
BEGIN
  SELECT B INTO blb FROM ATTACHEDBINARY WHERE ID=PK;
  RETURN(BLB);
  EXCEPTION 
    WHEN NO_DATA_FOUND THEN
      RAISE_APPLICATION_ERROR(-20001, 'GETBLOBBYID FAILED WITH NO DATA FOUND');
END;
|