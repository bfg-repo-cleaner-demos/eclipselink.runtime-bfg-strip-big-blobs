<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="1.0" xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.eclipse.org/eclipselink/xsds/persistence/orm xsd/eclipselink_orm_1_0.xsd">
    <description>Advanced Extended Test Model Instance Document</description>
    <package>org.eclipse.persistence.testing.models.jpa.xml.advanced</package>
    <type-converter name="String2String" data-type="String" object-type="String"/>
    <entity class="Employee" existence-checking="CHECK_DATABASE">
        <secondary-table name="CMP3_XML_SALARY">
            <primary-key-join-column name="E_ID" referenced-column-name="EMP_ID"/>
        </secondary-table>
        <customizer class="EmployeeCustomizer"/>
        <change-tracking type="AUTO"/>
        <optimistic-locking type="VERSION_COLUMN" cascade="true"/>
        <cache type="SOFT_WEAK" size="730" shared="true" disable-hits="true" always-refresh="false" coordination-type="INVALIDATE_CHANGED_OBJECTS">
            <!-- disable-hits is set to true. Do not change it, the employee customizer will set it to false and there is a test to verify that. -->
            <expiry>1000</expiry>
        </cache>
        <object-type-converter name="sex" data-type="String" object-type="Employee$Gender">
            <conversion-value data-value="F" object-value="Female"/>
            <conversion-value data-value="M" object-value="Male"/>
        </object-type-converter>
        <property name="entityName" value="XMLEmployee"/>
        <property name="entityIntegerProperty" value="1" value-type="Integer"/>
        <property name="ToBeOverriddenByXml" value="true" value-type="Boolean"/>
        <attributes>
            <id name="id">
                <column name="EMP_ID"/>
                <generated-value strategy="TABLE" generator="XML_EMPLOYEE_TABLE_GENERATOR"/>
                <convert name="String2String"/>
                <property name="attributeName" value="id"/>
            </id>
            <basic name="firstName">
                <column name="F_NAME"/>
                <property name="attributeName" value="firstName"/>
            </basic>
            <basic name="lastName">
                <column name="L_NAME"/>
                <property name="attributeName" value="lastName"/>
                <property name="BooleanProperty" value="true" value-type="java.lang.Boolean"/>
                <property name="ByteProperty" value="1" value-type="java.lang.Byte"/>
                <property name="CharacterProperty" value="A"  value-type="java.lang.Character"/>
                <property name="DoubleProperty" value="1" value-type="java.lang.Double"/>
                <property name="FloatProperty" value="1" value-type="java.lang.Float"/>
                <property name="IntegerProperty" value="1" value-type="java.lang.Integer"/>
                <property name="LongProperty" value="1" value-type="java.lang.Long"/>
                <property name="ShortProperty" value="1" value-type="java.lang.Short"/>
                <property name="BigDecimalProperty" value="1" value-type="java.math.BigDecimal"/>
                <property name="BigIntegerProperty" value="1" value-type="java.math.BigInteger"/>
                <property name="TimeProperty" value="13:59:59" value-type="java.sql.Time"/>
                <property name="TimeStampProperty" value="2008-04-10 13:59:59" value-type="java.sql.Timestamp"/>
                <property name="DateProperty" value="2008-04-10" value-type="java.sql.Date"/>
            </basic>
            <basic name="sin">
                <column name="SIN"/>
                <property name="attributeName" value="sin"/>
                <access-methods get-method="returnSIN" set-method="enterSIN"/>
            </basic>
            <basic name="gender">
                <column name="GENDER"/>
                <convert>sex</convert>
                <property name="attributeName" value="gender"/>
            </basic>
            <basic name="salary">
                <column table="CMP3_XML_SALARY"/>
                <property name="attributeName" value="salary"/>
            </basic>
            <basic-collection name="responsibilities">
                <value-column name="DESCRIPTION"/>
                <convert name="String2String"/>
                <collection-table name="CMP3_XML_RESPONS"/>
                <property name="attributeName" value="responsibilities"/>
            </basic-collection>
            <basic-map name="creditCards" fetch="EAGER">
                <key-column name="CARD"/>
                <key-converter>CreditCard</key-converter>
                <value-column name="NUMB"/>
                <value-converter>Long2String</value-converter>
                <object-type-converter name="CreditCard">
                    <conversion-value data-value="VI" object-value="Visa"/>
                    <conversion-value data-value="AM" object-value="Amex"/>
                    <conversion-value data-value="MC" object-value="Mastercard"/>
                    <conversion-value data-value="DI" object-value="DinersClub"/>
                </object-type-converter>
                <type-converter name="Long2String" data-type="String" object-type="Long"/>
                <!-- Let the collection table default in this case (EMPLOYEE_CREDITCARDS) -->
                <property name="attributeName" value="creditCards"/>
            </basic-map>
            <version name="version">
                <column name="VERSION"/>
                <property name="attributeName" value="version"/>
            </version>
            <many-to-one name="address" target-entity="Address" fetch="LAZY">
                <join-column name="ADDR_ID"/>
                <cascade>
                    <cascade-persist/>
                </cascade>
                <join-fetch>OUTER</join-fetch>
                <property name="attributeName" value="address"/>
            </many-to-one>
            <many-to-one name="manager" target-entity="Employee" fetch="LAZY">
                <join-column name="MANAGER_EMP_ID" referenced-column-name="EMP_ID"/>
                <cascade>
                    <cascade-persist/>
                </cascade>
                <property name="attributeName" value="manager"/>
            </many-to-one>
            <one-to-many name="phoneNumbers" target-entity="PhoneNumber" mapped-by="owner">
                <cascade>
                    <cascade-all/>
                </cascade>
                <property name="attributeName" value="phoneNumbers"/>
            </one-to-many>
            <one-to-many name="managedEmployees" target-entity="Employee" mapped-by="manager">
                <cascade>
                    <cascade-all/>
                </cascade>
                <property name="attributeName" value="managedEmployees"/>
            </one-to-many>
            <many-to-many name="projects" target-entity="Project">
                <order-by>name</order-by>
                <join-table name="CMP3_XML_PROJ_EMP">
                    <join-column name="EMP_ID" referenced-column-name="EMP_ID"/>
                    <inverse-join-column name="PROJ_ID" referenced-column-name="PROJ_ID"/>
                </join-table>
                <cascade>
                    <cascade-persist/>
                </cascade>
                <property name="attributeName" value="projects"/>
            </many-to-many>
            <embedded name="period">
                <attribute-override name="startDate">
                    <column name="START_DATE" nullable="false"/>
                </attribute-override>
                <attribute-override name="endDate">
                    <column name="END_DATE" nullable="true"/>
                </attribute-override>
                <property name="attributeName" value="period"/>
            </embedded>
            <transformation name="normalHours" mutable="false">
                <read-transformer method="buildNormalHours"/>
                <write-transformer method="getStartTime">
                    <column name="START_TIME"/>
                </write-transformer>
                <write-transformer method="getEndTime">
                    <column name="END_TIME"/>
                </write-transformer>
                <property name="attributeName" value="normalHours"/>
            </transformation>
            <transformation name="overtimeHours" mutable="false">
                <read-transformer transformer-class="AdvancedReadTransformer"/>
                <write-transformer transformer-class="AdvancedWriteTransformer">
                    <column name="START_OVERTIME"/>
                </write-transformer>
                <write-transformer transformer-class="AdvancedWriteTransformer">
                    <column name="END_OVERTIME"/>
                </write-transformer>
                <property name="attributeName" value="overtimeHours"/>
            </transformation>
        </attributes>
    </entity>
    <entity class="org.eclipse.persistence.testing.models.jpa.xml.advanced.Address">
        <change-tracking type="DEFERRED"/>
        <named-stored-procedure-query name="SProcXMLAddress" result-class="Address" procedure-name="SProc_Read_XMLAddress">
            <parameter direction="IN_OUT" name="address_id_v" query-parameter="ADDRESS_ID" type="Integer"/>
            <parameter direction="OUT" name="street_v" query-parameter="STREET" type="String"/>
            <parameter direction="OUT" name="city_v" query-parameter="CITY" type="String"/>
            <parameter direction="OUT" name="country_v" query-parameter="COUNTRY" type="String"/>
            <parameter direction="OUT" name="province_v" query-parameter="PROVINCE" type="String"/>
            <parameter direction="OUT" name="p_code_v" query-parameter="P_CODE" type="String"/> 
        </named-stored-procedure-query>       
        <named-stored-procedure-query name="SProcXMLInOut" result-class="Address" procedure-name="SProc_Read_XMLInOut">
            <parameter direction="IN_OUT" name="address_id_v" query-parameter="ADDRESS_ID" type="Long"/>
            <parameter direction="OUT" name="street_v" query-parameter="STREET" type="String"/> 
        </named-stored-procedure-query>
        <attributes>
            <basic name="province">
                <convert>ProvinceConverter</convert>
                <converter name="ProvinceConverter" class="ProvinceConverter"/>
            </basic>
            <basic name="type">
                <convert>class-instance</convert>
            </basic>
        </attributes>
    </entity>
    <entity class="PhoneNumber">
        <change-tracking type="ATTRIBUTE"/>
    </entity>
    <entity class="LargeProject" existence-checking="ASSUME_NON_EXISTENCE"/>
    <entity class="SmallProject" existence-checking="ASSUME_EXISTENCE"/>
    <entity class="Project" existence-checking="CHECK_CACHE">
        <change-tracking type="OBJECT"/>
        <optimistic-locking type="SELECTED_COLUMNS">
            <selected-column name="VERSION"/>
        </optimistic-locking>
    </entity>
    <entity name="XMLReadOnlyClass" class="ReadOnlyClass" access="PROPERTY" read-only="true">
        <table name="CMP3_XML_READONLY"/>
        <attributes>
            <id name="id"/>
        </attributes>
    </entity>
    <embeddable class="EmploymentPeriod">
        <property name="embeddableClassName" value="EmploymentPeriod"/>
        <property name="ToBeOverriddenByXml" value="true" value-type="Boolean"/>
    </embeddable>
</entity-mappings>
