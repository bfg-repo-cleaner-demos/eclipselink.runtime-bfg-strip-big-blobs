<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="2.1" xmlns="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_1.xsd">
    <description>Mapping Document containing persistence unit metadata.</description>
    
    <package>org.eclipse.persistence.testing.models.jpa21.advanced.xml</package>
    
    <mapped-superclass class="Athlete">
        <attributes>
            <basic name="age"/>
            <basic name="firstName">
                <column name="F_NAME"/>
            </basic>
            <basic name="lastName">
                <column name="L_NAME"/>
            </basic>
            <element-collection name="endorsements">
                <map-key-join-column name="ENDORSER_ID"/>
                <map-key-foreign-key name="XMLEndorsements_Key_Foreign_Key" foreign-key-definition="XMLEndorsements_Key_Foreign_Key_Definition"/>
                <column name="ENDORSEMENT"/>
                <collection-table name="JPA21_XML_ENDORSEMENTS">
                    <join-column name="ATHLETE_ID"/>
                    <foreign-key name="XMLEndorsements_Foreign_Key" foreign-key-definition="XMLEndorsements_Foreign_Key_Definition"/>
                </collection-table>
            </element-collection>
        </attributes>
    </mapped-superclass>
    
    <entity name="XMLRunner" class="Runner">
        <table name="JPA21_XML_RUNNER"/>
        <inheritance strategy="JOINED"/>
        <convert attribute-name="age" converter="org.eclipse.persistence.testing.models.jpa21.advanced.converters.AgeConverter"/>
        <attributes>
            <id name="id">
                <generated-value/>
            </id>
            <basic name="gender">
                <convert converter="org.eclipse.persistence.testing.models.jpa21.advanced.converters.GenderConverter"/>
            </basic>
            <one-to-many name="shoes" mapped-by="runner">
                <map-key-join-column name="TAG_IG"/>
                <map-key-foreign-key name="XMLRunner_ShoeTag_Foreign_Key" foreign-key-definition="XMLRunner_ShoeTag_Foreign_Key_Definition"/>
            </one-to-many>
            <many-to-many name="races">
                <join-table name="RUNNERS_RACES">
                    <join-column name="RUNNER_ID" referenced-column-name="ID"/>
                    <foreign-key name="XMLRunners_Races_Foreign_Key" foreign-key-definition="XMLRunners_Races_Foreign_Key_Definition"/>
                    <inverse-join-column name="RACE_ID" referenced-column-name="ID"/>
                    <inverse-foreign-key name="XMLRunners_Races_Inverse_Foreign_Key" foreign-key-definition="XMLRunners_Races_Inverse_Foreign_Key_Definition"/>
                </join-table>
            </many-to-many>
            <element-collection name="personalBests">
                <map-key-column name="DISTANCE"/>
                <column name="TIME"/>
                <convert attribute-name="key" converter="org.eclipse.persistence.testing.models.jpa21.advanced.converters.DistanceConverter"/>
                <convert converter="org.eclipse.persistence.testing.models.jpa21.advanced.converters.TimeConverter"/>
                <collection-table name="JPA21_XML_RUNNER_PBS">
                    <join-column name="RUNNER_ID"/>
                    <foreign-key name="XML_Runner_PBS_Foreign_Key" foreign-key-definition="XML_Runner_PBS_Foreign_Key_Definition"/>
                </collection-table>
            </element-collection>
            <embedded name="info">
                <convert attribute-name="level" converter="org.eclipse.persistence.testing.models.jpa21.advanced.converters.LevelConverter"/>
                <convert attribute-name="health" converter="org.eclipse.persistence.testing.models.jpa21.advanced.converters.HealthConverter"/>
                <convert attribute-name="status.runningStatus" converter="org.eclipse.persistence.testing.models.jpa21.advanced.converters.RunningStatusConverter"/>
            </embedded>
        </attributes>
    </entity>
    
    <entity name="XMLSprinter" class="Sprinter">
        <table name="JPA21_XML_SPRINTER"/>
        <primary-key-join-column name="SPRINTER_ID" referenced-column-name="ID"/>
        <primary-key-foreign-key name="XML_Sprinter_Foreign_Key" foreign-key-definition="XML_Sprinter_Foreign_Key_Definition"/>
    </entity>
    
    <entity name="XMLShoe" class="Shoe">
        <table name="JPA21_XML_SHOE"/>
        <attributes>
            <id name="id">
                <generated-value/>
            </id>
            <many-to-one name="runner">
                <join-column name="RUNNER_ID"/>
                <foreign-key name="XMLShoes_Runner_Foreign_Key" foreign-key-definition="XMLShoes_Runner_Foreign_Key_Definition"/>
            </many-to-one>
        </attributes>
    </entity>
    
    <entity name="XMLShoeTag" class="ShoeTag">
        <table name="JPA21_XML_SHOE_TAG"/>
        <attributes>
            <id name="id">
                <generated-value/>
            </id>
        </attributes>
    </entity>
    
    <entity name="XMLRace" class="Race">
        <table name="JPA21_XML_RACE"/>
        <attributes>
            <id name="id">
                <generated-value/>
            </id>
            <basic name="name"/>
            <many-to-many name="runners" mapped-by="races"/>
        </attributes>
    </entity>
    
    <entity name="XMLEndorser" class="Endorser">
        <table name="JPA21_XML_ENDORSER"/>
        <attributes>
            <id name="id">
                <generated-value/>
            </id>
            <basic name="name"/>
        </attributes>
    </entity>
    
    <embeddable class="RunnerInfo">
        <attributes>
            <basic name="level">
                <column name="R_LEVEL"/>
            </basic>
            <basic name="health">
                <column name="R_HEALTH"/>
            </basic>
        </attributes>
    </embeddable>
    
    <embeddable class="RunnerStatus">
        <attributes>
            <basic name="runningStatus">
                <column name="R_STATUS"/>
            </basic>
        </attributes>
    </embeddable>

    <converter class="org.eclipse.persistence.testing.models.jpa21.advanced.converters.AgeConverter"/>
    <converter class="org.eclipse.persistence.testing.models.jpa21.advanced.converters.DistanceConverter"/>
    <converter class="org.eclipse.persistence.testing.models.jpa21.advanced.converters.GenderConverter"/>
    <converter class="org.eclipse.persistence.testing.models.jpa21.advanced.converters.HealthConverter"/>
    <converter class="org.eclipse.persistence.testing.models.jpa21.advanced.converters.LevelConverter"/>
    <converter class="org.eclipse.persistence.testing.models.jpa21.advanced.converters.RunningStatusConverter"/>
    <converter class="org.eclipse.persistence.testing.models.jpa21.advanced.converters.TimeConverter"/>    

</entity-mappings>
